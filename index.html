<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Sign Your Mortgage Documentation</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/github-light.css">
    <meta name="viewport" content="width=device-width">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>

        <h1>Sign Your Mortgage Documentation</h1>
        <p>Sign Your Mortgage API Documentation</p>

        <p class="view"><a href="https://github.com/LandRegistry/deed-api">
          View the Project on GitHub <small>LandRegistry/deed-api</small></a>
        </p>
        <p><a href="#aboutThisService">About This Service</a></p>
        <p><a href="#jsonSchemas">JSON Schemas</a></p>
        <p><a href="#testHub">Test Hub</a></p>
        <p><a href="#examplePayloads">Example Payloads and Responses</a></p>
        <p><a href="#testData">Test Data</a></p>

      </header>
      <section>
        <a name="aboutThisService"><h2>About This Service</h2></a>
        <p>
          The Sign Your Mortgage service allows a conveyancer to create a
          digital mortgage using the interface provided by Deed-API. The
          service also provides endpoints for getting a created deed, checking
          which deeds have been signed by borrowers and making a deed effective.
        </p>
        <p>
          Deeds created using the Deed-Api service can be signed by a borrower
          using the Sign Your Mortgage service on GOV.UK and submitted to
          HM Land Registry for registration using Business Gateway.
        </p>
        <div class="schemas">
          <a name="jsonSchemas"><h2>JSON Schemas</h2></a>
          <h4>
            <a href="https://raw.githubusercontent.com/LandRegistry/deed-api/develop/application/deed/schemas/deed-api.json">
              Deed API
            </a>
          </h4>
        </div>
        <div class="schemas">
          <a name="testHub"><h2>Test Hub</h2></a>
          <p>
            HM Land Registry operates a test hub which runs a test version of
            the Deed Api service allowing developers to test their solution
            against a running example of the service.
          </p>
          <p>Access to the Test Hub is controlled via webseal and you will need
            to request to have your organisation's certificate added to the
            access list.
          </p>
          <p>The URL's for the Test-Hub are as follows:</p>
          <h3>Borrower Frontend</h3>
          <a href="https://search-property-information.service.gov.uk/sign-my-mortgage/">
            https://search-property-information.service.gov.uk/sign-my-mortgage/
          </a>
          <h3>Deed API</h3>
          <a href="http://beta.landregistry.gov.uk/api/deeds">
            http://beta.landregistry.gov.uk/api/deeds
          </a>
        </div>
        <div class="schemas">
          <a name="examplePayloads"><h2>Example Payloads and Responses</h2></a>
          <p>Below are examples of payloads accepted by Deed API and responses.</p>
          <p>
            <strong>NOTE</strong> This is not an exhaustive example of all
            error messages the system returns but provides an example of the
            format of each response and error type.
          </p>
          <h3>Create Deed</h3>
          <h4>POST /deed/</h4>
          <h5>Payload</h5>
          <p>
            This endpoint requires that the Content-Type header
            be set as application/json
          </p>
          <pre>
            <code>
{
    "title_number": "GR515835",
    "md_ref": "e-MD12344",
    "property_address": "80 High Street, Plymouth, Devon, PL6 5WS",
    "identity_checked": "Y",
    "borrowers": [
        {
            "forename": "Ann",
            "surname": "Smith",
            "gender": "Female",
            "address": "test address with postcode, PL14 3JR",
            "dob": "23/01/1985",
            "phone_number": "07502154998"
        },
        {
            "forename": "Fredd",
            "surname": "Smith",
            "gender": "Female",
            "address": "test address with postcode, PL14 3JR",
            "dob": "23/01/1985",
            "phone_number": "0750215999"
        }
    ]
}
            </code>
          </pre>
          <h5>Responses</h5>
          201 CREATED
          <pre>
            <code>
{
  "path": "/deed/0729e738-c073-445f-8976-9c81bbecf5c7"
}
            </code>
          </pre>
          400 BAD REQUEST
          <pre>
            <code>
{
  "errors": [
    "Problem 1: A mobile phone number must be unique to an individual."
  ]
}
            </code>
          </pre>
          <h3>Get Deed</h3>
          <h4>GET /deed/&lt;Deed Id&gt;</h4>
          <h5>Responses</h5>
          200 OK
          <pre>
            <code>
{
  "deed": {
    "additional_provisions": [
      {
        "additional_provision_code": "addp001",
        "description": "This Mortgage Deed incorporates the Lenders Mortgage Conditions and Explanation 2006, a copy of which the borrower has received."
      },
      {
        "additional_provision_code": "addp002",
        "description": "The lender is obliged to make further advances and applies for the obligation to be entered in the register."
      },
      {
        "additional_provision_code": "addp003",
        "description": "The borrower applies to enter a restriction in the register that no disposition of the registered estate by the proprietor of the registered estate is to be registered without a written consent signed by the proprietor for the time being of the charge dated [the date of this charge] in favour of Bank of Test Plc referred to in the charges register."
      }
    ],
    "borrowers": [
      {
        "forename": "Ann",
        "id": 676,
        "surname": "Smith",
        "token": "GT5VBTR8"
      },
      {
        "forename": "Fredd",
        "id": 677,
        "surname": "Smith",
        "token": "N1L51A4L"
      }
    ],
    "charge_clause": {
      "cre_code": "CRE001",
      "description": "The borrower, with full title guarantee, charges to the lender the property by way of legal mortgage with payment of all money secured by this charge."
    },
    "effective_clause": "This charge takes effect when the registrar receives notification from Land Registry Devices that the charge is to take effect.",
    "lender": {
      "address": "12 Test Place, Test Street, London NW0 0TQ",
      "name": "Test Building Society",
      "registration": "Company registration number: 2347676"
    },
    "md_ref": "e-MD12344",
    "property_address": "80 High Street, Plymouth, Devon, PL6 5WS",
    "status": "DRAFT",
    "title_number": "GR515835",
    "token": "0b29c37b-1896-4219-832d-5ddf499a6027"
  }
}
            </code>
          </pre>
          404 NOT FOUND
          <pre>
            <code>
{
  "message": "Deed not found"
}
            </code>
          </pre>
          <h3>Retrieve signed deeds</h3>
          <h4>GET /retrieve-signed</h4>
          <h5>Responses</h5>
          200 OK
          <pre>
            <code>
{
  "deeds": [
    "40a235b9-78eb-4dab-95d6-db7c75eedcb0",
    "2130a81c-3fbe-4381-ac47-a4300c48f841"
  ]
}
            </code>
          </pre>
          404 NOT FOUND
          <pre>
            <code>
{
  "message": "There are no deeds which have been fully signed"
}
            </code>
          </pre>
          <h3>Make deed effective</h3>
          <h4>POST /deed/&lt;Deed Id&gt;/make-effective</h4>
          <h5>Responses</h5>
          200 OK
          <pre>
            <code>
{
  "path": "/deed/40a235b9-78eb-4dab-95d6-db7c75eedcb0"
}
            </code>
          </pre>
          400 BAD REQUEST
          <pre>
            <code>
{
  "errors": [
    "Problem 1: This deed cannot be made effective as not all borrowers have signed the deed."
  ]
}
            </code>
          </pre>
          <h3>Generic error</h3>
          <p>
            for any system error not handled by the system the following error
            will be returned.
          </p>
          <pre>
            <code>
{
  "message": "Unexpected error."
}
            </code>
          </pre>
        </div>
        <div class="schemas">
          <a name="testData"><h2>Test Data</h2></a>
          <p>
            There are a selection of test Titles and MD references in the Test
            Hub which can be used to test the service. Note that when creating
            a deed the borrowers must be an exact match to the proprietors on
            the register. See example payload above for a create deed payload
            using the data below that will work in the test hub. The test data
            is as follows:
          </p>
          <h3>Good Title</h3>
          <p><strong>Title number</strong> GR515835</p>
          <p><strong>Proprietors</strong> Ann Smith, Fredd Smith</p>
          <h3>Closed Title</h3>
          <p><strong>Title Number</strong> GR518327</p>
          <p>
            <strong>Response message</strong> Title closed and continued under
            GR518006.
          </p>
          <h3>Unsuitable Title</h3>
          <p><strong>Title Number</strong> GR516921<p>
          <p>
            <strong>Response</strong> Title is not suitable for a digital
            mortgage as it is a qualified title.
          </p>
          <h3>MD Reference</h3>
          <p>e-MD12344</p>
        </div>
      </section>
      <footer>
        <p>This project is maintained by
          <a href="https://github.com/LandRegistry">LandRegistry</a>
        </p>
        <p>
          <small>Hosted on GitHub Pages &mdash; Theme by
          <a href="https://github.com/orderedlist">orderedlist</a></small>
        </p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
  </body>
</html>
